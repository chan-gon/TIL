# 운영체제 개요

## 운영체제란 무엇인가!

- 컴퓨터 하드웨어 바로 위에 설치되어 사용자 및 다른 소프트웨어와 하드웨어를 연결하는 소프트웨어 계층이다.  

- 컴퓨터 시스템을 편리하게 사용할 수 있는 환경을 제공한다.

- 컴퓨터 시스템의 자원을 효율적으로 관리한다.

- 이를 통해 사용자들이 컴퓨터의 세부 구조 및 동작 방식을 알지 못해도 편리하게 원하는 기능을 사용할 수 있도록 돕는다.

![운영체제](./images/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-1.jpeg)

출처: https://www.tutorialspoint.com/operating_system/os_overview.htm

## 운영체제의 기능 - 운영체제는 어떤 일을 할까?

* CPU 스케줄링

컴퓨터 내부에는 CPU와 메모리가 있고, 매순간 CPU가 메모리를 읽어서 사용자가 원하는 동작을 수행한다.  

그리고 모니터, 키보드, 하드디스크와 같은 입출력(I/O) 디바이스를 통해 통신한다.

CPU의 작업 공간은 메모리이기 때문에 CPU가 직접 입출력 디바이스에 접근할 수 없다. 대신 입출력 디바이스마다 붙어 있는 작은 CPU라고 할 수 있는 I/O 컨트롤러를 통해 CPU와 통신한다.

CPU는 메모리에 올라온 다양한 프로그램과 통신하는데, **CPU 스케줄링**을 통해 어떤 프로그램에게 CPU 사용권을 부여할지 결정한다. CPU는 하드웨어이기 때문에 스스로 동작할 수 없고, 운영체제의 명령에 의해 어떤 프로그램을 얼마나 오랫동안 선점할지, 어떻게 동작할지에 대한 명령을 따를 뿐이다. 운영체제의 일을 대행하는 것이다.

* 메모리 관리

한정된 메모리를 효율적으로 관리 및 사용.

* 디스크 스케줄링

디스크는 CPU와 비교하여 대단히 느린 장치다.(엄-청) 따라서 CPU에 의해 메모리상에 있는 여러개의 프로그램들이 디스크에 입출력 요청을 하면 어떤 프로그램의 작업부터 먼저 처리할지에 대한 **디스크 스케줄링** 작업 규칙이 필요하다. 디스크 스케줄링과 동일한 것이 엘리베이터 스케줄링이다. 꼭대기층을 먼저 눌렀어도 올라가는 도중 중간층을 누르면 중간층에 먼저 정지한다.

* 인터럽트, 캐싱

빠른 속도의 CPU와 느린 입출력 장치간 속도차를 완충하는 것이 인터럽트와 캐싱이다.  

- 캐싱: 속도차가 발생하는 두 장치 사이에 위치하여 동일한 요청이 있을 시 메모리 어딘가에서 복제한 요청값을 전달한다. 요청이 있을 때마다 입출력 장치에 왔다 갔다 할 필요가 없다.

- 인터럽트: CPU가 프로그램을 실행하고 있을 때, 입출력 하드웨어 등의 장치에 예외상황이 발생하여 처리가 필요할 경우에 CPU에게 알려 처리할 수 있도록 하는 것을 말한다. CPU가 특정 기능을 수행하는 도중에 급하게 다른 일을 처리하고자 할 때 사용할 수 있는 기능이다.

## 프로세스의 상태

프로세스는 운영체제에 의해 실행되는 프로그램의 실행 단위이다.

CPU는 항상 어떤 프로그램을 실행하고 있다. 그리고 CPU큐가 있는데, 큐 안에서 다음에 실행할 프로그램들이 줄지어 자신의 순서를 기다리고 있다. 동작 방식은 CPU 스케줄링 방식을 따른다.

입출력 장치 또한 큐를 통해 요청을 저장했다가 자신의 차례가 되면 CPU큐로 넘어가서 실행된다.

## CPU 스케줄링 - FCFS(First Come First Served)

먼저 도착한 프로세스에게 CPU 사용권을 부여한다.
 
공편한 것 같지만, 효율적이지는 않다. 하나의 프로세스가 CPU를 너무 오래 점유하게 되면 다른 프로세스가 오랫동안 기다려야 한다. 

## CPU 스케줄링 - SJF(Shortest Job First)

큐에서 기다리는 프로세스들 중에서 CPU 사용시간이 가장 짧은 프로세스에게 우선 사용권을 부여한다.  
SJF는 minumum average waiting time, 대기 시간이 가장 짧은 스케줄링 방식이다. 사용시간이 짧은 프로세스부터 사용하기 때문.

효율성은 좋지만 형평성에 문제가 있다. CPU 사용시간이 짧은 프로세스에 집중하다 보니 사용시간이 긴 프로세스가 소외되는 현상이 발생한다. 이것을 Starvation(기아 현상) 이라고 한다.  
물론, 계속 기다리다 보면 언젠가는 사용시간이 긴 프로세스의 차례가 올 수 있을 것이다. 하지만 컴퓨터는 계속 동작하고, 새로운 프로세스가 생성되기 때문에 사용시간이 긴 프로세스의 차례가 영원히 오지 않을 수도 있다.  

## CPU 스케줄링 - Round Robin(RR)

각 프로세스는 동일 크기의 CPU 할당시간을 가진다.(프로세스들 사이에 우선순위를 두지 않는다) 그리고 할당시간이 끝나면 인터럽트가 발생하여 프로세스는 CPU를 빼앗기고, CPU 큐의 제일 뒤에 줄은 선다.  
프로세스들에게 자원을 사용할 수 있는 기회를 공정하게 부여하기 위한 방법으로, 각 프로세스에게 할당 시간이 주어지고, 할당 시간이 지나면 다른 프로세스에게 넘어가는 방식으로 동작한다.