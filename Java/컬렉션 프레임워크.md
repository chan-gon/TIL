# 컬렉션 프레임워크

자바 컬렉션은 객체를 수집해서 저장하는 역할을 한다. 프레임워크란 사용 방법을 미리 정해 놓은 라이브러리를 말한다. 자바 컬렉션 프레임워크는 몇 가지 인터페이스를 통해 다양한 컬렉션 클래스를 이용할 수 있도록 한다. 주요 인터페이스는 List, Set, Map이 있다. 

![자바 컬렉션 프레임워크](./image/java_chapter15_1.png)

## List 컬렉션

[List 컬렉션](https://docs.oracle.com/javase/8/docs/api/java/util/List.html)은 객체를 일렬로 늘어놓은 구조를 가지고 있다. 객체를 인덱스(index)로 관리하기 때문에 객체를 저장하면 자동으로 인덱스가 부여되고, 인덱스로 객체를 검색/삭제할 수 있는 기능을 제공한다. List 컬렉션은 객체 자체를 저장하는 것이 아니라 객체의 번지를 참조한다. 동일한 객체를 중복 저장할 수 있는데, 이 경우 동일한 번지가 참조된다. null도 저장 가능하다. 이 경우 해당 인덱스는 객체를 참조하지 않는다.

![List 컬렉션](./image/java_chapter15_2.png)

List 컬렉션에는 ArrayList, Vector, LinkedList 등이 있다. 아래 표는 List 컬렉션에서 공통적으로 사용 가능한 List 인터페이스의 메소드이다. 인덱스로 객체를 관리하기 때문에 인덱스를 매개값으로 갖는 메소드가 많다.

![List 컬렉션](./image/java_chapter15_3.png)

리턴 타입으로 E라는 타입 파라미터가 있는 경우가 있는데, 이것은 List 인터페이스가 제네릭 타입이기 때문이다. 구체적인 타입은 구현 객체를 생성할 때 결정된다. 

아래 코드는 List 컬렉션에 저장되는 구체적인 타입을 String으로 하고, 추가, 삽입, 삭제하는 모습이다.

<pre>
<code>
List<String> list = ...;
list.add("Park");
list.add(1,"Hong"); // 지정된 인덱스에 객체 삽입(1번 인덱스에 문자열 Hong을 삽입하겠다)
String str = list.get(1); // 인덱스로 특정 객체 찾아오기
list.remove(0); // 인덱스로 특정 객체 삭제
list.remove("Hong"); // 객체 삭제
</code>
</pre>

만약 전체 객체를 대상으로 하나씩 반복해서 저장된 객체를 얻고 싶다면 for문을 사용하면 된다.

<pre>
<code>
List<String> list = ...;
for(int i = 0; i<list.size(); i++) {
    String str = list.get(i); // i 인덱스에 저장된 String 객체 가져온다.
}
</code>
</pre>

인덱스가 필요 없다면 향상된 for문을 사용하는 것이 편리하다.
<pre>
<code>
for(String str : list) { ... } // String 객체를 하나씩 가져온다.
</code>
</pre>

### ArrayList

[ArrayList](https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html)에 객체를 추가하면 객체가 인덱스로 관리된다. 일반 배열과 ArrayList는 인덱스로 객체를 관리한다는 점에서 유사하지만 차이점이 있다.

* 일반 배열: 생성 시 크기가 고정되고, 사용 중에 크기 변경이 불가능.
* ArrayList: 저장 용량(capacity)을 초과한 객체들이 들어오면 자동적으로 저장 용량이 늘어난다.
(As elements are added to an ArrayList, its capacity grows automatically.)

ArrayList를 생성하기 위해서는 저장할 객체 타입을 타입 파라미터로 표기하고 기본 생성자를 호출하면 된다. 예를 들어 String을 저장하는 ArrayList는 다음과 같이 생성할 수 있다.

<pre>
<code>
List<String> list = new ArrayList<String>();
</code>
</pre>

기본 생성자로 ArrayList 객체를 생성하면 내부에 10개의 객체를 저장할 수 있는 초기 용량(capacity)을 가지게 된다. 저장되는 객체 수가 늘어나면 용량이 자동으로 증가하고, 처음부터 용량을 크게 잡고 싶다면 용량의 크기를 매개값으로 받는 생성자를 이용하면 된다.

<pre>
<code>
// String 객체 30개를 저장할 수 있는 용량을 가지는 ArrayList 생성
List<String> list = new ArrayList<String>(30);
</code>
</pre>

ArrayList에 객체를 추가하면 인덱스 0부터 차례대로 저장된다. ArrayList에서 특정 인덱스의 객체를 제거하면 바로 뒤 인덱스부터 마지막 인덱스까지 모두 앞으로 1씩 당겨진다. 마찬가지로 특정 인덱스에 객체를 삽입하면 해당 인덱스부터 마지막 인덱스까지 모두 1씩 밀려난다. 따라서 **빈번한 객체 삭제와 삽입이 일어나는 곳에서는 ArrayList를 사용하는 것이 바람직하지 않다. 이 경우 LinkedList를 사용하는 것이 좋다.** 인덱스 검색이나, 맨 마지막에 객체를 추가하는 경우라면 ArrayList가 더 좋은 성능을 발휘한다. 

아래 코드는 ArrayList에 String 객체를 추가, 검색, 삭제하는 모습이다.

<pre>
<code>
import java.util.*;

public class Main {
    public static void main(String[] args) {
        List<String> list = new ArrayList<String>();

        list.add("A1");
        list.add("A2");
        list.add("A3");

        // 저장된 총 객체 수 
        int size = list.size();
        System.out.println("size = " + size); // 3

        // 특정 인덱스의 객체 가져오기
        String value = list.get(1);
        System.out.println("value of an index 1 = " + value); // A2

        // 저장된 총 객체 수만큼 루핑
        for(int i = 0; i<list.size(); i++){
            String value = list.get(i);
            System.out.println(i + " : " + value);

            결과)
            0 : A1
            1 : A2
            2 : A3
        }
        
        // 특정 인덱스 객체 삭제
        list.remove(1);
        for(int i = 0; i<list.size(); i++){
            String value = list.get(i);
            System.out.println(i + " : " + value);

            결과)
            0 : A1
            1 : A3
        }

        // 특정 인덱스 객체 삭제   
        list.remove("A3");
        for(int i = 0; i<list.size(); i++){
            String value = list.get(i);
            System.out.println(i + " : " + value);

            결과)
            0 : A1
        }
    }
}
</code>
</pre>

ArrayList를 생성하고 런타임 시 필요에 의해 객체들을 추가하는 것이 일반적이지만, 고정된 객체들로 구성된 List를 생성할 때도 있다. 이 경우 Arrays.asList(T... a) 메소들르 사용하는 것이 간편하다.

<pre>
<code>
List<T> list = Arrays.asList(T... a);
</code>
</pre>

T 타입 파라미터에 맞게 asList()의 매개값을 순차적으로 입력하거나, T[] 배열을 매개값으로 주면 된다.
아래 코드는 고정된 String 객체를 요소로 갖는 ArrayList 객체를 생성한다.

<pre>
<code>
import java.util.Arrays;
import java.util.List;

public class Main {
    public static void main(String[] args) {
        List<String> list = Arrays.asList("A1", "A2", "A3");
        for(String value : list) {
            System.out.println(value);
        }

        List<Integer> list2 = Arrays.asList(3, 2, 1);
        for(int value : list2) {
            System.out.println(value);
        }
    }
}

결과)
A1
A2
A3
3
2
1
</code>
</pre>

# 출처
* [이것이 자바다](http://www.kyobobook.co.kr/product/detailViewKor.laf?ejkGb=KOR&mallGb=KOR&barcode=9788968481475&orderClick=LAG&Kc=)
